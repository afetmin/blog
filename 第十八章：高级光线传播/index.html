<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="IT-Y25F5RCj2PCcER-kk9d5-HNubsC889CdBMXmjtZY">
  <meta name="msvalidate.01" content="B87806C7BDCEE73E30D63422AFE6515C">

<link rel="stylesheet" href="/blog/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=LXGW+WenKai:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"afetmin.github.io","root":"/blog/","images":"/blog/images","scheme":"Gemini","darkmode":false,"version":"8.21.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":400},"bookmark":{"enable":false,"color":"#222","save":"manual"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"utterances","storage":true,"lazyload":false,"nav":null,"activeClass":"utterances"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/blog/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":true,"trigger":"auto"}}</script><script src="/blog/js/config.js"></script>



<link rel="canonical" href="https://afetmin.github.io/blog/%E7%AC%AC%E5%8D%81%E5%85%AB%E7%AB%A0%EF%BC%9A%E9%AB%98%E7%BA%A7%E5%85%89%E7%BA%BF%E4%BC%A0%E6%92%AD/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://afetmin.github.io/blog/%E7%AC%AC%E5%8D%81%E5%85%AB%E7%AB%A0%EF%BC%9A%E9%AB%98%E7%BA%A7%E5%85%89%E7%BA%BF%E4%BC%A0%E6%92%AD/","path":"第十八章：高级光线传播/","title":"第十八章：高级光线传播"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>第十八章：高级光线传播 | 花满渚，酒满瓯</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-CCDJNF04LD"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-CCDJNF04LD","only_pageview":false,"measure_protocol_api_secret":null}</script>
  <script src="/blog/js/third-party/analytics/google-analytics.js"></script>

  <script src="/blog/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?d3c4bbd29d7df929e988a67667b6fe6e"></script>








    

<link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-webfont/1.6.0/style.css" />
  <noscript>
    <link rel="stylesheet" href="/blog/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">花满渚，酒满瓯</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">我曾七次鄙视自己的灵魂</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/blog/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">7</span></a></li><li class="menu-item menu-item-categories"><a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">10</span></a></li><li class="menu-item menu-item-archives"><a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">58</span></a></li><li class="menu-item menu-item-sitemap"><a href="/blog/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7%E5%85%89%E7%BA%BF%E4%BC%A0%E6%92%AD"><span class="nav-number">1.</span> <span class="nav-text">高级光线传播</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%97%A0%E5%81%8F%E5%92%8C%E6%9C%89%E5%81%8F"><span class="nav-number">1.1.</span> <span class="nav-text">无偏和有偏</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%8C%E5%90%91%E8%B7%AF%E5%BE%84%E8%BF%BD%E8%B8%AA"><span class="nav-number">1.2.</span> <span class="nav-text">双向路径追踪</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Metropolis-%E5%85%89%E7%BA%BF%E4%BC%A0%E6%92%AD"><span class="nav-number">1.3.</span> <span class="nav-text">Metropolis 光线传播</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%89%E5%AD%90%E6%98%A0%E5%B0%84"><span class="nav-number">1.4.</span> <span class="nav-text">光子映射</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Vertex-Connection-and-Merging"><span class="nav-number">1.5.</span> <span class="nav-text">Vertex Connection and Merging</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Instant-Radiosity-%E5%AE%9E%E6%97%B6%E8%BE%90%E5%B0%84%E5%BA%A6"><span class="nav-number">1.5.1.</span> <span class="nav-text">Instant Radiosity 实时辐射度</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Advanced-Appearance-Modeling-%E5%A4%96%E8%A7%82%E5%BB%BA%E6%A8%A1"><span class="nav-number">1.6.</span> <span class="nav-text">Advanced Appearance Modeling 外观建模</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%9D%9E%E8%A1%A8%E9%9D%A2%E6%A8%A1%E5%9E%8B"><span class="nav-number">1.6.1.</span> <span class="nav-text">非表面模型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%95%A3%E5%B0%84%E4%BB%8B%E8%B4%A8%E7%9A%84%E6%B8%B2%E6%9F%93"><span class="nav-number">1.6.2.</span> <span class="nav-text">散射介质的渲染</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%A4%B4%E5%8F%91%EF%BC%88%E5%85%89%E7%BA%BF%E5%92%8C%E4%B8%80%E6%A0%B9%E6%9B%B2%E7%BA%BF%E4%BD%9C%E7%94%A8%EF%BC%89"><span class="nav-number">1.6.2.1.</span> <span class="nav-text">头发（光线和一根曲线作用）</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%9D%9E%E8%A1%A8%E9%9D%A2%E6%A8%A1%E5%9E%8B-translucent-material-%EF%BC%88%E5%8D%8A%E9%80%8F%E6%98%8E%E6%9D%90%E8%B4%A8%EF%BC%89"><span class="nav-number">1.6.3.</span> <span class="nav-text">非表面模型 translucent material （半透明材质）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%99%AA%E5%A3%B0%E5%87%BD%E6%95%B0%E7%9A%84%E5%BA%94%E7%94%A8"><span class="nav-number">1.6.4.</span> <span class="nav-text">噪声函数的应用</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="afetmin"
      src="/blog/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">afetmin</p>
  <div class="site-description" itemprop="description">人生苦短，何必荒废时光去遗憾？</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/blog/archives/">
          <span class="site-state-item-count">58</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/blog/categories/">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/blog/tags/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/afetmin" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;afetmin" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:kingpenguins@163.com" title="E-Mail → mailto:kingpenguins@163.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
        <div class="pjax">
        <div class="sidebar-inner sidebar-post-related">
          <div class="animated">
              <div class="links-of-blogroll-title"><i class="fa fa-signs-post fa-fw"></i>
    相关文章
  </div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <a class="popular-posts-link" href="/blog/%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E5%8F%98%E6%8D%A2/" rel="bookmark">
        <time class="popular-posts-time">2023-04-01</time>
        <br>
      第三章：变换
      </a>
    </li>
    <li class="popular-posts-item">
      <a class="popular-posts-link" href="/blog/%E7%AC%AC%E5%8D%81%E5%85%AD%E7%AB%A0%EF%BC%9ARay%20tracing4%20%E8%92%99%E7%89%B9%E5%8D%A1%E6%B4%9B%E8%B7%AF%E5%BE%84%E8%BF%BD%E8%B8%AA/" rel="bookmark">
        <time class="popular-posts-time">2023-08-17</time>
        <br>
      第十六章：Ray tracing4 蒙特卡洛路径追踪
      </a>
    </li>
    <li class="popular-posts-item">
      <a class="popular-posts-link" href="/blog/%E7%AC%AC%E4%BA%8C%E5%8D%81%E7%AB%A0%EF%BC%9A%E9%A2%9C%E8%89%B2%E5%92%8C%E6%84%9F%E7%9F%A5/" rel="bookmark">
        <time class="popular-posts-time">2023-08-17</time>
        <br>
      第二十章：颜色和感知
      </a>
    </li>
    <li class="popular-posts-item">
      <a class="popular-posts-link" href="/blog/%E7%AC%AC%E5%8D%81%E4%B9%9D%E7%AB%A0%EF%BC%9A%E7%9B%B8%E6%9C%BA%E3%80%81%E9%80%8F%E9%95%9C%E3%80%81%E5%85%89%E5%9C%BA/" rel="bookmark">
        <time class="popular-posts-time">2023-08-17</time>
        <br>
      第十九章：相机、透镜、光场
      </a>
    </li>
    <li class="popular-posts-item">
      <a class="popular-posts-link" href="/blog/%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%B8%80%E7%AB%A0%EF%BC%9AAnimation%E3%80%81Simulation/" rel="bookmark">
        <time class="popular-posts-time">2023-08-17</time>
        <br>
      第二十一章：Animation、Simulation
      </a>
    </li>
  </ul>

          </div>
        </div>
        </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://afetmin.github.io/blog/%E7%AC%AC%E5%8D%81%E5%85%AB%E7%AB%A0%EF%BC%9A%E9%AB%98%E7%BA%A7%E5%85%89%E7%BA%BF%E4%BC%A0%E6%92%AD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.jpg">
      <meta itemprop="name" content="afetmin">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="花满渚，酒满瓯">
      <meta itemprop="description" content="人生苦短，何必荒废时光去遗憾？">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="第十八章：高级光线传播 | 花满渚，酒满瓯">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          第十八章：高级光线传播
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-08-17 19:51:18" itemprop="dateCreated datePublished" datetime="2023-08-17T19:51:18+00:00">2023-08-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/%E5%9B%BE%E5%BD%A2%E5%AD%A6/" itemprop="url" rel="index"><span itemprop="name">图形学</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.6k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>9 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h3 id="高级光线传播"><a href="#高级光线传播" class="headerlink" title="高级光线传播"></a><strong>高级光线传播</strong></h3><ul>
<li>无偏的光线传播方法<ul>
<li>双向路径追踪（BDPT）</li>
<li>Metropolis 光线传播（MLT）</li>
</ul>
</li>
</ul>
<ul>
<li><p>有偏的光线追踪方法</p>
<ul>
<li>光子映射（Photon mapping）</li>
<li>Vertex connection and merging（VCM，结合了光子映射和双向映射追踪）</li>
</ul>
</li>
<li><p>实时辐射度算法（把间接光表示成很多很小的光源）</p>
</li>
<li><p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210449-rafge05.png" alt="image">​</p>
</li>
</ul>
<h4 id="无偏和有偏"><a href="#无偏和有偏" class="headerlink" title="无偏和有偏"></a><strong>无偏和有偏</strong></h4><p>蒙特卡罗不管用多少样本，期望永远是对的，被称为无偏的；其他情况就是有偏的，但如果取的样本非常多，多到无穷多，最后期望值会收敛到正确值。这个时候就称为一致的。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210458-j95kajg.png" alt="image">​</p>
<h4 id="双向路径追踪"><a href="#双向路径追踪" class="headerlink" title="双向路径追踪"></a><strong>双向路径追踪</strong></h4><p>路径追踪是利用光路可逆性，从相机开始打出的路径，连接相机和光源</p>
<p>双向路径追踪分别从光源和相机出发，生成两条半（子）路径，再把半路径的端点连接起来，就形成了整个路径。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210503-otznwgf.png" alt="image">​</p>
<p>双线路径追踪适合光源在一侧的复杂传输，但是实现起来比较困难，且运行速度很慢</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210508-mvlce8c.png" alt="image">​</p>
<h4 id="Metropolis-光线传播"><a href="#Metropolis-光线传播" class="headerlink" title="Metropolis 光线传播"></a><strong>Metropolis 光线传播</strong></h4><p>用一个统计学上的采样工具马尔可夫链，通过当前的样本，生成和他靠近的下一个样本。可以做到只要给足够的时间，可以生成以任意的函数的形状为 PDF 的样本。</p>
<p>而当采样的函数 p(x)和积分的函数 f(x)的形状一致的时候，得到的偏差是最小的。</p>
<p>给定一条路径，可以生成周围更多和他相似的路径。因此是一个局部的方法。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210513-m3kjpoa.png" alt="image">​</p>
<p>Metropolis 特别适合做复杂的光路传播，因为只要找到一条正确的，就能不断在它周围找到更多。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210518-yr7m9na.png" alt="image">​</p>
<p>缺点是：<br>1.很难在理论上分析它收敛的速度（给一幅图，无法分析渲染多长时间才会收敛）</p>
<p>2.所有操作都是局部的，有一些像素收敛的快，有一些收敛的慢，得到的图像比较“脏“</p>
<p>3.因为不同像素收敛速度不一样，所以不能渲染动画。因为两帧之间会差距很大。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210524-yzpjvr2.png" alt="image">​</p>
<h4 id="光子映射"><a href="#光子映射" class="headerlink" title="光子映射"></a><strong>光子映射</strong></h4><p>光子映射是一个有偏的估计，很适合用来渲染 caustic（caustic 是由于光线聚焦产生的一些图案）。同时适合用来处理 SDS 路径。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210529-xpgewj2.png" alt="image">​</p>
<p>一种光子映射的方法：<br>第一步：光子从光源出发，不断的反射和折射，直到光子打到 diffuse 的物体，就停下来。然后把所有的光子都记录下来</p>
<p>第二步：从相机开始打出多条路径，直到打到 diffuse 的物体上就停下来</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210534-bqsftuw.png" alt="image">​</p>
<p>接下来做局部的密度估计：</p>
<p>对任何一个着色点，选择离他最近的 n 个光子，再找这 n 的光子占据的面的面积，计算光子的密度。光子分布的越集中的地方越亮。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210539-ncxmjrb.png" alt="image">​</p>
<p>为什么是有偏的：<br />正常计算密度应该用很小的 n 除以很小的面积，当实际的覆盖面积足够小（光子打出去的面积足够多）的时候，就接近真实的密度，这种情况被称为是一致的。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210544-m04arg7.png" alt="image">​</p>
<p>在渲染里简单的理解有偏或无偏：<br>有偏：只要结果有一点模糊，就认为是有偏的。</p>
<p>一致的：虽然有模糊的，但是样本足够多，就能收敛到正确的结果。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210549-gtjdxe6.png" alt="image">​</p>
<h4 id="Vertex-Connection-and-Merging"><a href="#Vertex-Connection-and-Merging" class="headerlink" title="Vertex Connection and Merging"></a><strong>Vertex Connection and Merging</strong></h4><p>双向路径追踪和光子映射的结合</p>
<p>主要思想是：对于两个 subpath，最后他们的交点非常接近的时候，用光子映射把两个 subpath 结合到一起。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210555-7ryptvn.png" alt="image">​</p>
<h5 id="Instant-Radiosity-实时辐射度"><a href="#Instant-Radiosity-实时辐射度" class="headerlink" title="Instant Radiosity 实时辐射度"></a><strong>Instant Radiosity 实时辐射度</strong></h5><p>认为已经被照亮的地方就是光源，可以继续照射别的地方。</p>
<p>假设从光源射出来的光线最后会停在某个地方，这个地方就变成了一个虚拟的点光源，然后用这些虚拟的点光源照亮着色点。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210601-mwl9t0z.png" alt="image">​</p>
<p>缺点：</p>
<p>1.在一些接缝会出现一些光点</p>
<p>2.做不了镜面的材质</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210606-nird8z3.png" alt="image">​</p>
<p>出现光点的原因是：做 light sampling 的时候，对积分域转换，把对立体角的采样转换成对面积的采样。此处分母出现了一个距离的平方，当距离很近，接近 0 点时候会出现一个很大的结果。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817205831-kbeuy6l.png" alt="image">​</p>
<p>工业界现在主要在用 path tracing 的方法。</p>
<h4 id="Advanced-Appearance-Modeling-外观建模"><a href="#Advanced-Appearance-Modeling-外观建模" class="headerlink" title="Advanced Appearance Modeling 外观建模"></a><strong>Advanced Appearance Modeling 外观建模</strong></h4><ul>
<li><p>非表面模型</p>
<ul>
<li>散射介质</li>
<li>头发、毛发、纤维</li>
<li>粒状材质（沙子）</li>
</ul>
</li>
<li><p>表面模型</p>
<ul>
<li>半透明材质</li>
<li>布料</li>
<li>有细节度的模型</li>
</ul>
</li>
<li><p>程序化生成的模型</p>
</li>
<li><p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210635-ey35l8m.png" alt="image">​</p>
</li>
</ul>
<h5 id="非表面模型"><a href="#非表面模型" class="headerlink" title="非表面模型"></a><strong>非表面模型</strong></h5><p><strong>散射介质</strong>：雾、云</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210642-hkzfvub.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210646-m8q1772.png" alt="image">​</p>
<p>光线的传播过程中会：1.被吸收 2.被散射</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210651-7dgv07t.png" alt="image">​</p>
<p>由 Phase Function（相位函数）来定义在每个点怎么散射</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210656-t4ld57w.png" alt="image">​</p>
<h5 id="散射介质的渲染"><a href="#散射介质的渲染" class="headerlink" title="散射介质的渲染"></a>散射介质的渲染</h5><p>随机地找到一个方向发生弹射，随机地往一个方向前进，找到一个 path 把各个弹射的位置相连。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210700-ipm9m0r.png" alt="image">​</p>
<p>participanting media 有很多应用：<br />超能特工队</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210705-whu0gey.png" alt="image">​</p>
<p>刺客信条：</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210710-9pnih2p.png" alt="image">​</p>
<p>巧克力也是一种散射介质，只是光进去了以后很快就会消失</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210715-fn5elqm.png" alt="image">​</p>
<h6 id="头发（光线和一根曲线作用）"><a href="#头发（光线和一根曲线作用）" class="headerlink" title="头发（光线和一根曲线作用）"></a><strong>头发（</strong>光线和一根曲线作用）</h6><p>有两种类型的高光：有色的高光和无色的高光。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210719-maoriyz.png" alt="image">​</p>
<p>Kajiya-Kay<br />把头发当成一个圆柱，光线打到上面会散射出一个圆锥。同时，有一些光线会被散射到四面八光（有点类似于 Diffuse 和 Specular 加起来）。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210724-zy065l5.png" alt="image">​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210728-2hx9ny0.png" alt="image">​​</p>
<p>Marschner Model</p>
<p>考虑光线打到头发上，有一部会直接反射，记为 R</p>
<p>一部分会打进去，发生折射，再打出来，记为 TT</p>
<p>还有一部分进到头发里面，走到内壁，发生一次内部的反射，再发生一次穿透，记 TRT</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210738-aa1240r.png" alt="image">​</p>
<p>把头发当成一个玻璃材质的圆柱，有表皮（cuticle）和皮层（cortex）。头发内部有色素，光线传播进去会有部分被吸收。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210743-3vk9pzv.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210746-r444iza.png" alt="image">​</p>
<p>光线打到多根头发，就会从一根头发弹射到另一根头发，所以计算量巨大。</p>
<p>头发模型的应用：</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210751-fycq4ef.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210755-qa328qe.png" alt="image">​</p>
<p>人的头发模型不足以描述光线和动物毛发的作用</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210804-lqruv79.png" alt="image">​</p>
<p>毛发除了之前提到的表皮和皮质层，还有中间的髓质层，光线进入髓质层会被反射到四面八方。而动物毛发的髓质层比人要粗很多。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210809-uei58uw.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210813-7m0ratb.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210816-b3cvtyb.png" alt="image">​</p>
<p>Double Cylinder Model（双层圆柱模型）</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210821-7zce8xa.png" alt="image">​</p>
<p>相比之前增加了光线穿过髓质折射出来的分量 TTs 和光线穿过髓质，发生反射再穿出来的分量 TRTs</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210825-h1yddpz.png" alt="image">​</p>
<p>最后头发的颜色由五个分量结合而成：</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210830-0lq5865.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210834-v67bpqe.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210837-efkz5gm.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210841-jfe5ugl.png" alt="image">​</p>
<p><strong>Granular Material（颗粒材料）</strong></p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210847-7y4bt6a.png" alt="image">​</p>
<p>可以做一些简化，不去计算每一个颗粒。</p>
<p>比如下图中，把整个模型分成很多个单元，每个单元中由不同的材质按不同的比例来构成。用这种单元模型去做渲染。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210852-pz6cfqi.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210855-yjgauem.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210858-y825oep.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210902-f219ixi.png" alt="image">​</p>
<h5 id="非表面模型-translucent-material-（半透明材质）"><a href="#非表面模型-translucent-material-（半透明材质）" class="headerlink" title="非表面模型 translucent material （半透明材质）"></a><strong>非表面模型</strong> translucent material （半透明材质）</h5><p>光线可以从某个地方进去材质表面，从另外一个面穿出来。</p>
<p>​​玉石：</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210907-9xfh6bg.png" alt="image">​</p>
<p>水母：</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210914-557rp6k.png" alt="image">​</p>
<p>次表面散射：光线从一个点进入物体表现，发生了很多次反射，再从另一个表面出来。]</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210926-39bmn2y.png" alt="image">​</p>
<p>次表面反射是对 BRDF 的延伸，BSSRDF，中间加了 SS（次表面反射）。即计算一个点的反射，除了考虑各个方向对这个点的影响，还要考虑其他点反射过来的光，既要对方向做积分，又要对面积做积分。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210931-iao0nml.png" alt="image">​</p>
<p>Dipole Approximation<br />次表面反射可以近似为物体内部的一个光源加上外部的一个光源共同照射的结果：</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210936-50h97zo.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210941-cg3xvfh.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210945-pvhguml.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210950-rsxgkci.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210953-l34aj56.png" alt="image">​</p>
<p>BSSRDF 的应用：</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817210958-2fizy28.png" alt="image">​</p>
<p><strong>Cloth 材质</strong></p>
<p>很多纤维缠绕形成股，很多股缠绕形成线，最后织成布。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211003-utxm1ek.png" alt="image">​</p>
<p>有三种方法进行渲染：</p>
<p>1.把布当作表面，用 BRDF 模型进行渲染。根据不同的织法、形状得到不同的渲染结果。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211013-nznj6he.png" alt="image">​</p>
<p>但是明显布的材质不一定是一个表面，比如天鹅绒材质。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211017-dmw1ob6.png" alt="image">​</p>
<p>2.像散射介质一样渲染：把空间分成很小的格子，知道每个格子的纤维朝向分布、复杂程度。把这些性质转换为光线的吸收和散射，就像是渲染散射介质。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211023-e4t83ap.png" alt="image">​</p>
<p>3.把每一根纤维都渲染出来，当头发一样渲染。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211027-wxa0g03.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211031-f9ovxu5.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211035-2szkdrt.png" alt="image">​</p>
<p><strong>有细节的复杂材质</strong></p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211042-rn6ehn7.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211046-bvl8m2z.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211050-13rjg79.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211053-70ppxx2.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211057-agkm8oc.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211100-64a767r.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211104-32jgmlo.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211108-2wr6ccu.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211112-8bn8rgt.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211116-r0dg6g3.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211120-pgov3tv.png" alt="image">​</p>
<p>我们认为每一个微表面都是镜面，很难通过反射的方式让光线打到光源或者摄像机上。所以用一个像素覆盖很多微表面，在一个小的范围内把微表面的法线分布算出来，替代之前光滑的分布。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211127-535rwg7.png" alt="image">​</p>
<p>不同的范围选择会得到不同的微表面法线分布结果：</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211134-g6gysfn.png" alt="image">​</p>
<p>不同性质的材质会得到不同形状的微表面分布：</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211139-pvrkpls.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211145-ppe0chi.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211150-i4yk4fi.png" alt="image">​</p>
<p>细节材质的应用</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211154-6tvipfw.png" alt="image">​</p>
<p>在微型的细节上，比如物体很小，小到和光的波长相当，此时不能从几何光学的角度去分析，要考虑光的振动，需要用到波动光学。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211159-sld6fjy.png" alt="image">​</p>
<p>在一个黑暗的房间里用点光源打出一道光，会看到材质表面有很多颜色：</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211203-ev3uyyp.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211208-d3j0mo9.png" alt="image">​</p>
<p>波动光学下的 BRDF：</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211211-mmusp3p.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211215-bd78kjn.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211218-th5itfy.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211223-3yq66jl.png" alt="image">​​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211227-xwalx32.png" alt="image">​</p>
<p><strong>程序化生成的表面（Procedural Appearance）</strong></p>
<p>用三维空间中的噪声函数生成材质外观，procedural 表示不提前生成，随用随取，用的时候去查询。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211232-uurjwpl.png" alt="image">​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211237-blf0c0h.png" alt="image">​​</p>
<p>对噪声函数可以做一些处理得到不同的效果，比如车上的锈，可以做二值化，有些地方有，有些地方没有。</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211249-v7g4u40.png" alt="image">​</p>
<h5 id="噪声函数的应用"><a href="#噪声函数的应用" class="headerlink" title="噪声函数的应用"></a>噪声函数的应用</h5><p>生成地形</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211254-h8580kh.png" alt="image">​</p>
<p>生成水面</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211259-o0afr75.png" alt="image">​</p>
<p>生成三维的木头，任意切割可以得到内部的外观</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211303-7hxibix.png" alt="image">​</p>
<p>​<img data-src="/blog/./images/%E5%9B%BE%E5%BD%A2%E5%AD%A6/image-20230817211306-ei5l4ua.png" alt="image">​</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>请我一杯咖啡吧！</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/blog/images/wechatpay.jpg" alt="afetmin 微信">
        <span>微信</span>
      </div>

  </div>
</div>


        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/blog/%E7%AC%AC%E5%8D%81%E5%85%AD%E7%AB%A0%EF%BC%9ARay%20tracing4%20%E8%92%99%E7%89%B9%E5%8D%A1%E6%B4%9B%E8%B7%AF%E5%BE%84%E8%BF%BD%E8%B8%AA/" rel="prev" title="第十六章：Ray tracing4 蒙特卡洛路径追踪">
                  <i class="fa fa-angle-left"></i> 第十六章：Ray tracing4 蒙特卡洛路径追踪
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/blog/%E7%AC%AC%E5%8D%81%E4%BA%94%E7%AB%A0%EF%BC%9ARay%20tracing%203%20%E5%85%89%E7%BA%BF%E4%BC%A0%E6%92%AD%E5%92%8C%E5%85%A8%E5%B1%80%E5%85%89%E7%85%A7/" rel="next" title="第十五章：Ray tracing 3 光线传播和全局光照">
                  第十五章：Ray tracing 3 光线传播和全局光照 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments utterances-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">afetmin</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">71k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">4:17</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.umd.js" integrity="sha256-a+H7FYzJv6oU2hfsfDGM2Ohw/cR9v+hPfxHCLdmCrE8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/blog/js/comments.js"></script><script src="/blog/js/utils.js"></script><script src="/blog/js/motion.js"></script><script src="/blog/js/sidebar.js"></script><script src="/blog/js/next-boot.js"></script><script src="/blog/js/pjax.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/blog/js/third-party/search/local-search.js"></script>




  <script src="/blog/js/third-party/fancybox.js"></script>

  <script src="/blog/js/third-party/pace.js"></script>


  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"ams","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/blog/js/third-party/math/mathjax.js"></script>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.3.0/quicklink.umd.js" integrity="sha256-yvJQOINiH9fWemHn0vCA5lsHWJaHs6/ZmO+1Ft04SvM=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":false,"archive":false,"delay":true,"timeout":3000,"priority":true,"url":"https://afetmin.github.io/blog/%E7%AC%AC%E5%8D%81%E5%85%AB%E7%AB%A0%EF%BC%9A%E9%AB%98%E7%BA%A7%E5%85%89%E7%BA%BF%E4%BC%A0%E6%92%AD/"}</script>
  <script src="/blog/js/third-party/quicklink.js"></script>
<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"afetmin/blog","issue_term":"pathname","theme":"github-light"}</script>
<script src="/blog/js/third-party/comments/utterances.js"></script>

</body>
</html>
